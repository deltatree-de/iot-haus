# Mosquitto MQTT Broker Configuration

# Basic settings
persistence true
persistence_location /var/lib/mosquitto/

# Logging
log_dest file /var/log/mosquitto/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information

# Default listener on port 1883 (internal only)
listener 1883 127.0.0.1
protocol mqtt

# No WebSocket listener needed - Node.js server handles WebSocket proxy

# Allow anonymous access (for demo purposes)
allow_anonymous true

# No authentication required (for demo)
# In production, you should configure proper authentication
# password_file /etc/mosquitto/passwd

# Connection settings
max_connections 1000
max_inflight_messages 20
max_queued_messages 100

# Persistence settings
autosave_interval 1800
autosave_on_changes false
persistent_client_expiration 2m

# Logging levels
connection_messages true
log_timestamp true
